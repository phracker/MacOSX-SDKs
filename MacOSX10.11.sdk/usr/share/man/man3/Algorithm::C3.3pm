.\" Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{
.    if \nF \{
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "Algorithm::C3 3"
.TH Algorithm::C3 3 "2015-08-22" "perl v5.18.2" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
Algorithm::C3 \- A module for merging hierarchies using the C3 algorithm
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
.Vb 1
\&  use Algorithm::C3;
\&
\&  # merging a classic diamond
\&  # inheritance graph like this:
\&  #
\&  #    <A>
\&  #   /   \e
\&  # <B>   <C>
\&  #   \e   /
\&  #    <D>
\&
\&  my @merged = Algorithm::C3::merge(
\&      \*(AqD\*(Aq,
\&      sub {
\&          # extract the ISA array
\&          # from the package
\&          no strict \*(Aqrefs\*(Aq;
\&          @{$_[0] . \*(Aq::ISA\*(Aq};
\&      }
\&  );
\&
\&  print join ", " => @merged; # prints D, B, C, A
.Ve
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
This module implements the C3 algorithm. I have broken this out
into it's own module because I found myself copying and pasting
it way too often for various needs. Most of the uses I have for
C3 revolve around class building and metamodels, but it could
also be used for things like dependency resolution as well since
it tends to do such a nice job of preserving local precedence
orderings.
.PP
Below is a brief explanation of C3 taken from the Class::C3
module. For more detailed information, see the \*(L"\s-1SEE ALSO\*(R"\s0 section
and the links there.
.SS "What is C3?"
.IX Subsection "What is C3?"
C3 is the name of an algorithm which aims to provide a sane method
resolution order under multiple inheritance. It was first introduced
in the language Dylan (see links in the \*(L"\s-1SEE ALSO\*(R"\s0 section), and
then later adopted as the preferred \s-1MRO \s0(Method Resolution Order)
for the new-style classes in Python 2.3. Most recently it has been
adopted as the 'canonical' \s-1MRO\s0 for Perl 6 classes, and the default
\&\s-1MRO\s0 for Parrot objects as well.
.SS "How does C3 work."
.IX Subsection "How does C3 work."
C3 works by always preserving local precedence ordering. This
essentially means that no class will appear before any of it's
subclasses. Take the classic diamond inheritance pattern for
instance:
.PP
.Vb 5
\&     <A>
\&    /   \e
\&  <B>   <C>
\&    \e   /
\&     <D>
.Ve
.PP
The standard Perl 5 \s-1MRO\s0 would be (D, B, A, C). The result being that
\&\fBA\fR appears before \fBC\fR, even though \fBC\fR is the subclass of \fBA\fR.
The C3 \s-1MRO\s0 algorithm however, produces the following \s-1MRO \s0(D, B, C, A),
which does not have this same issue.
.PP
This example is fairly trivial, for more complex examples and a deeper
explanation, see the links in the \*(L"\s-1SEE ALSO\*(R"\s0 section.
.SH "FUNCTION"
.IX Header "FUNCTION"
.ie n .IP "\fBmerge ($root, \fB$func_to_fetch_parent\fB, \f(BI$cache\fB)\fR" 4
.el .IP "\fBmerge ($root, \f(CB$func_to_fetch_parent\fB, \f(CB$cache\fB)\fR" 4
.IX Item "merge ($root, $func_to_fetch_parent, $cache)"
This takes a \f(CW$root\fR node, which can be anything really it
is up to you. Then it takes a \f(CW$func_to_fetch_parent\fR which
can be either a \s-1CODE\s0 reference (see \s-1SYNOPSIS\s0 above for an
example), or a string containing a method name to be called
on all the items being linearized. An example of how this
might look is below:
.Sp
.Vb 2
\&  {
\&      package A;
\&
\&      sub supers {
\&          no strict \*(Aqrefs\*(Aq;
\&          @{$_[0] . \*(Aq::ISA\*(Aq};
\&      }
\&
\&      package C;
\&      our @ISA = (\*(AqA\*(Aq);
\&      package B;
\&      our @ISA = (\*(AqA\*(Aq);
\&      package D;
\&      our @ISA = (\*(AqB\*(Aq, \*(AqC\*(Aq);
\&  }
\&
\&  print join ", " => Algorithm::C3::merge(\*(AqD\*(Aq, \*(Aqsupers\*(Aq);
.Ve
.Sp
The purpose of \f(CW$func_to_fetch_parent\fR is to provide a way
for \f(CW\*(C`merge\*(C'\fR to extract the parents of \f(CW$root\fR. This is
needed for C3 to be able to do it's work.
.Sp
The \f(CW$cache\fR parameter is an entirely optional performance
measure, and should not change behavior.
.Sp
If supplied, it should be a hashref that merge can use as a
private cache between runs to speed things up.  Generally
speaking, if you will be calling merge many times on related
things, and the parent fetching function will return constant
results given the same arguments during all of these calls,
you can and should reuse the same shared cache hash for all
of the calls.  Example:
.Sp
.Vb 8
\&  sub do_some_merging {
\&      my %merge_cache;
\&      my @foo_mro = Algorithm::C3::Merge(\*(AqFoo\*(Aq, \e&get_supers, \e%merge_cache);
\&      my @bar_mro = Algorithm::C3::Merge(\*(AqBar\*(Aq, \e&get_supers, \e%merge_cache);
\&      my @baz_mro = Algorithm::C3::Merge(\*(AqBaz\*(Aq, \e&get_supers, \e%merge_cache);
\&      my @quux_mro = Algorithm::C3::Merge(\*(AqQuux\*(Aq, \e&get_supers, \e%merge_cache);
\&      # ...
\&  }
.Ve
.SH "CODE COVERAGE"
.IX Header "CODE COVERAGE"
I use \fBDevel::Cover\fR to test the code coverage of my tests, below
is the \fBDevel::Cover\fR report on this module's test suite.
.PP
.Vb 7
\& \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\-
\& File                       stmt   bran   cond    sub    pod   time  total
\& \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\-
\& Algorithm/C3.pm           100.0  100.0  100.0  100.0  100.0  100.0  100.0
\& \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\-
\& Total                     100.0  100.0  100.0  100.0  100.0  100.0  100.0
\& \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\- \-\-\-\-\-\-
.Ve
.SH "SEE ALSO"
.IX Header "SEE ALSO"
.SS "The original Dylan paper"
.IX Subsection "The original Dylan paper"
.IP "<http://www.webcom.com/haahr/dylan/linearization\-oopsla96.html>" 4
.IX Item "<http://www.webcom.com/haahr/dylan/linearization-oopsla96.html>"
.SS "The prototype Perl 6 Object Model uses C3"
.IX Subsection "The prototype Perl 6 Object Model uses C3"
.PD 0
.IP "<http://svn.openfoundry.org/pugs/perl5/Perl6\-MetaModel/>" 4
.IX Item "<http://svn.openfoundry.org/pugs/perl5/Perl6-MetaModel/>"
.PD
.SS "Parrot now uses C3"
.IX Subsection "Parrot now uses C3"
.IP "<http://aspn.activestate.com/ASPN/Mail/Message/perl6\-internals/2746631>" 4
.IX Item "<http://aspn.activestate.com/ASPN/Mail/Message/perl6-internals/2746631>"
.PD 0
.IP "<http://use.perl.org/~autrijus/journal/25768>" 4
.IX Item "<http://use.perl.org/~autrijus/journal/25768>"
.PD
.SS "Python 2.3 \s-1MRO\s0 related links"
.IX Subsection "Python 2.3 MRO related links"
.IP "<http://www.python.org/2.3/mro.html>" 4
.IX Item "<http://www.python.org/2.3/mro.html>"
.PD 0
.IP "<http://www.python.org/2.2.2/descrintro.html#mro>" 4
.IX Item "<http://www.python.org/2.2.2/descrintro.html#mro>"
.PD
.SS "C3 for TinyCLOS"
.IX Subsection "C3 for TinyCLOS"
.IP "<http://www.call\-with\-current\-continuation.org/eggs/c3.html>" 4
.IX Item "<http://www.call-with-current-continuation.org/eggs/c3.html>"
.SH "AUTHORS"
.IX Header "AUTHORS"
Stevan Little, <stevan@iinteractive.com>
.PP
Brandon L. Black, <blblack@gmail.com>
.SH "COPYRIGHT AND LICENSE"
.IX Header "COPYRIGHT AND LICENSE"
Copyright 2006 by Infinity Interactive, Inc.
.PP
<http://www.iinteractive.com>
.PP
This library is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.
