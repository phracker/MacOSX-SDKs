.Dd January 24, 1984   \" DATE
.Dt sysdiagnose 1      \" Program name and manual section number 
.Os OS X
.Sh NAME               \" Section Header - required - don't modify
.Nm sysdiagnose
.\" The following lines are read in generating the apropos(man -k) database. Use only key
.\" words here as the database is built based on the words here and in the .ND line. 
.\" Use .Nm macro to designate other names for the documented program.
.Nd gathers system-wide diagnostic information helpful in investigating system performance issues
.\" ============================================================================
.\" ========================== BEGIN SYNOPSIS SECTION ==========================
.Sh SYNOPSIS
.Nm
.Fl h
.Nm
.Op Fl f Ar results_directory
.Op Fl A Ar archive_name
.Op Fl V Ar volume_path
.Op Fl n
.Op Fl C, -compression Ar compression_type
.Op Fl k
.Op Fl F
.Op Fl S
.Op Fl u
.Op Fl Q
.Op Fl b
.Op Fl p
.Op Fl P
.Op Fl d
.Op Fl D
.Op Fl r
.Op Fl R
.Op Ar process_name | pid
.\" =========================== END SYNOPSIS SECTION ===========================
.\" ============================================================================
.\"
.\" ============================================================================
.\" ======================== BEGIN DESCRIPTION SECTION =========================
.Sh DESCRIPTION          \" Section Header - required - don't modify
The
.Nm
tool gathers system diagnostic information helpful in investigating system performance issues.
A great deal of information is harvested, spanning system state and configuration. The data is stored /var/tmp directory.
.Nm
needs to be run as root. To cancel an in-flight
.Nm
triggered via command line interface, press Ctrl-\\.
.Nm
is automatically triggered when the following key chord is pressed: Control-Option-Command-Shift-Period.
.\" ----------------------------------------------------------------------------
.\" ----------------------- BEGIN DIAGNOSTICS LIST -----------------------------
.Ss What Nm Sy collects:
.Bl -bullet -offset indent -compact
.It
A spindump of the system
.It
Several seconds of fs_usage ouput 
.It
Several seconds of top output
.It
Data about kernel zones
.It
Status of loaded kernel extensions 
.It
Resident memory usage of user processes
.It
Recent system logs
.It
A System Profiler report
.It
Recent crash reports
.It
Disk usage information
.It
I/O Kit registry information
.It
Network status
.It
If a specific process is supplied as an argument: list of malloc-allocated buffers in the process's heap is collected
.It
If a specific process is supplied as an argument: data about unreferenced malloc buffers in the process's memory is collected 
.It
If a specific process is supplied as an argument: data about the virtual memory regions allocated in the process
.El
.\" ----------------------------------------------------------------------------
.\" ========================== END DIAGNOSTICS LIST ============================
.\" ----------------------------------------------------------------------------
.\" ========================== END DESCRIPTION SECTION =========================
.\" ============================================================================
.\"
.\" ============================================================================
.\" =========================== BEGIN OPTIONS SECTION ==========================
.Sh OPTIONS
.Bl -tag -width -indent 
.It Fl h
Display help.
.It Fl v
Enable verbose mode to display the container information as it executes.
.It Fl f Ar results_directory
Specify the directory where the results will be stored. The default results directory is /var/tmp.
.It Fl A Ar archive_name
Specify the name of the archive created in the results directory.
.It Fl V Ar volume_path
Specify the root volume for sysdiagnose to run on.
.It Fl n
Do not tar the resulting sysdiagnose directory.
.It Fl C, -compression Ar compression_type Op tar|yaa|default|no-compression
Specify the compression type for the resulting sysdiagnose directory.
.It Fl k
Do not remove the temporary directory.
.It Fl F
Get feedback data.
.It Fl S
Disable streaming to tarball.
.It Fl u
Disable UI feedback.
.It Fl Q
Skip footprint.
.It Fl b
Do NOT show the resulting archive in a Finder window upon completion.
.It Fl p
Collect only time-sensitive data. Disregards previous -d or -r flags.
.It Fl P
Do not collect time-sensitive data.
.It Fl d
Collect only log collection data. Disregards previous -p or -r flags.
.It Fl D
Do not collect log collection data.
.It Fl g
Collect only log generation data. Disregards previous -p or -r flags.
.It Fl G
Do not collect log generation data.
.It Fl r
Collect only log archive. Disregards previous -p or -d flags.
.It Fl R
Do not collect log archive.
.It Ar process_name | pid
If a single process appears to be slowing down the system, passing in the process name or ID as the argument gathers additional process-specific diagnostic data. Specify only ONE process at a time -- specifying multiple processes is not supported.
.El
.\" =========================== END OPTIONS SECTION ============================
.\" ============================================================================
.\" ============================================================================
.\" ======================== BEGIN EXIT STATUS SECTION =========================
.Sh EXIT STATUS
.Nm
exits with status 0 if there were no internal errors encountered during the diagnostic, or >0 when an error unrelated to external state occurs or unusable input is provided by the user.
.\" ========================= END EXIT STATUS SECTION ==========================
.\" ============================================================================
