.\" Copyright (c) 2011 Apple Inc. All rights reserved.
.Dd May 7, 2011
.Dt "filtercalltree" 1
.Os
.Sh NAME
.Nm filtercalltree
.Nd Filter or prune a call tree file generated by sample or malloc_history
.Sh SYNOPSIS
.Nm
.Ar call-tree-file
.Op Fl invertCallTree
.Op Fl pruneCount Ar count
.Op Fl pruneMallocSize Ar size
.Op Fl chargeSystemLibraries
.Op Fl chargeLibrary Ar libraryName
.Op Fl keepBoundaries
.Sh DESCRIPTION
.Nm
reads a file containing a call tree, as generated by the
.Xr sample 1
or 
.Xr malloc_history 1
commands, and filters or prunes it as specified by the options.
.Pp
.Sh OPTIONS
.Bl -tag -width "-chargeSystemLibraries"
.It Fl invertCallTree
Print the call tree from hottest to coldest stack frame.
.It Fl pruneCount Ar count
Remove branches of the call tree that have count less than
.Ar count
.It Fl pruneMallocSize Ar size
Remove branches of the call tree that have malloc size less than
.Ar size ,
such as 500K or 1.2M.
.It Fl chargeSystemLibraries
Remove stack frames from all libraries in /System and /usr, while still charging
their cost to the caller.
.It Fl chargeLibrary Ar library-name
Remove stack frames from
.Ar library-name ,
while still charging their cost to the caller.  This argument can be repeated
for multiple libraries.
.It Fl keepBoundaries
When charging libraries to callers, keep the top call into excluded libraries.
.El
.Pp
.Sh SEE ALSO
.Xr malloc_history 1 ,
.Xr sample 1
