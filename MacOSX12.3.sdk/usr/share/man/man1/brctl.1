.\""Copyright (c) 2014 Apple Inc. All Rights Reserved.
.Dd 22/04/14
.Dt BRCTL 1
.Os Mac OS X
.Sh NAME
.Nm brctl
.Nd Manage the CloudDocs daemon
.Sh SYNOPSIS
.Nm
.Ao Ar command Ac
.Op command-options and arguments
.Sh DESCRIPTION
.Nm
understands the following commands:
.Pp
.Sy diagnose
.Op options
.Op Ao Ar diagnosis-output-path Ac
    diagnose and collect logs
.Pp
    -M,--collect-mobile-documents[=<container>]  (default: all containers)
    -s,--sysdiagnose     Do not collect what's already part of sysdiagnose
    -n,--name=<name>     Change the device name
    [<diagnosis-output-path>]
                         Specifies the output path of the diagnosis; -n becomes useless.
.Pp
.Sy download
.Ao Ar path Ac
    download a local copy of the document at this path
.Pp
.Sy evict
.Ao Ar path Ac
    evict the local copy of the document at this path
.Pp
.Sy log
.Op options
.Op Ao Ar command Ac
.Pp
    -c,--color[={yes,no}]
                         turn on or off color use
    -d,--path=<logs-dir> use <logs-dir> instead of default
    -H,--home=<home-dir> use this as the ~ prefix, to look for ~/L/
    -f,--filter=<predicate>
                         only show lines matching predicate
    -m,--multiline[={yes,no}]
                         turn on or off multiple line logging
    -n=<number>          number of initial lines to display
    -p,--page            use paging
    -w,--wait            wait for new logs continuously (syslog -w)
    -t,--shorten         Shorten UUIDs, paths, etc
    -s,--digest          Only print digest logs
.Pp
.Sy dump
.Op options
.Op Ao Ar container Ac
    dump the CloudDocs database
.Pp
    -o,--output=<file-path>
                         redirect output to <file-path>
    -d,--database-path=<db-path>
                         Use the database at <db-path>
    [<container>]        the container to be dumped
.Pp
.Sy monitor
.Op options
.Ao Ar container Ac
    use NSMetadataQuery to monitor the container
.Pp
    -S,--scope=<scope>
                         restrict the NSMDQ scope to DOCS, DATA, or BOTH
.Pp
.Sy versions
.Op options
.Ao Ar path Ac
.Op ALL|etags...
    list the non-local versions of the document at this path.
.Pp
    -a,--all             List all non-local versions including those that
                         are locally cached
.Pp
.Sh SEE ALSO
.Xr bird 8
